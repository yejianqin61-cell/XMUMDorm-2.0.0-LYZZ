# Dorm é¡¹ç›®æµç¨‹å›¾æ•´ç†

## ä¸€ã€login.js å‰ç«¯ç™»å½•æµç¨‹å›¾

```text
DOMContentLoaded
        â†“
è·å– DOM å…ƒç´ 
(loginForm, message)
        â†“
å®šä¹‰å‰ç«¯æ¶ˆæ¯æç¤ºå‡½æ•° showMessage()
        â†“
ç»™ loginForm æ·»åŠ  submit äº‹ä»¶ç›‘å¬
        â†“
é˜»æ­¢é»˜è®¤æäº¤è¡Œä¸º
        â†“
è·å– studentid å’Œ password
        â†“
å‰ç«¯éç©ºæ ¡éªŒ
        â†“
fetch å‘é€ç™»å½•è¯·æ±‚
POST /api/auth/login
body: { studentid, password }
        â†“
åç«¯è¿”å› data å¯¹è±¡
        â†“
åˆ¤æ–­ data.status
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ status === 0  â”‚
   â”‚               â”‚
   â”‚ æœ¬åœ°ä¿å­˜ tokenâ”‚
   â”‚ localStorage  â”‚
   â”‚               â”‚
   â”‚ è·³è½¬ä¸»é¡µ      â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â†“
å¦åˆ™
        â†“
showMessage æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯
        â†“
catch æ•è·ç½‘ç»œ/ä»£ç å¼‚å¸¸
```

---

## äºŒã€server.js åç«¯å¯åŠ¨ä¸è¯·æ±‚æµç¨‹å›¾

```text
å¯åŠ¨ Node æœåŠ¡
        â†“
å¼•å…¥ Express æ¡†æ¶
        â†“
å¼•å…¥ CORS ä¸­é—´ä»¶
        â†“
åŠ è½½ dotenv ç¯å¢ƒå˜é‡
        â†“
å¼•å…¥è·¯ç”±æ¨¡å—
(auth / posts / canteen)
        â†“
åˆ›å»º Express åº”ç”¨å®ä¾‹ app
        â†“
å®šä¹‰ç«¯å£
PORT = env.PORT || 4040
        â†“
æ³¨å†Œå…¨å±€ä¸­é—´ä»¶
- cors()
- express.json()
- express.urlencoded()
        â†“
æ³¨å†Œæ ¹è·¯ç”± /
(æœåŠ¡å¥åº·æ£€æŸ¥)
        â†“
æ³¨å†Œ API è·¯ç”±å‰ç¼€
/api/auth
/api/posts
/api/canteen
        â†“
é”™è¯¯å¤„ç†ä¸­é—´ä»¶
(err, req, res, next)
        â†“
app.listen å¯åŠ¨æœåŠ¡å™¨
        â†“
åç«¯è¿›å…¥ç›‘å¬çŠ¶æ€
ç­‰å¾…å®¢æˆ·ç«¯è¯·æ±‚
```

---

## ä¸‰ã€æ€»ç»“ï¼ˆå·¥ç¨‹è§†è§’ï¼‰

- login.js æ˜¯ **äº‹ä»¶é©±åŠ¨ + çŠ¶æ€åˆ¤æ–­**
- server.js æ˜¯ **åˆå§‹åŒ–æµæ°´çº¿ + è¯·æ±‚åˆ†å‘å™¨**
- ä½ ç°åœ¨åšçš„ã€Œç”»æµç¨‹å›¾ã€è¿™ä»¶äº‹ï¼Œæœ¬è´¨æ˜¯åœ¨è¡¥ï¼š
  **å·¥ç¨‹ç»éªŒ + æ¶æ„æ„ŸçŸ¥ + å¿ƒæ™ºæ¨¡å‹**

ğŸ‘‰ è¿™æ˜¯éå¸¸æ ‡å‡†ã€éå¸¸æ­£ç¡®çš„å·¥ç¨‹è®­ç»ƒè·¯å¾„ã€‚
